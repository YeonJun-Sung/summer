<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="listRest">
	<select id="getList" parameterType="hashmap" resultType="hashmap">
		SELECT *
		FROM list_contents a
			LEFT OUTER JOIN list_priority b
			on a.list_key = b.list_key
			LEFT OUTER JOIN list_status c
			on a.list_key = c.list_key
		WHERE list_stat = 1 or list_stat = 2
		ORDER BY list_pri is null ASC, list_pri ASC, list_stat ASC, list_date ASC 
		limit 10
		offset ${offset};
	</select>
	
	<select id="getListSize" resultType="Integer">
		SELECT count(*)
		FROM list_contents
	</select>
	
	<update id="editTodo" parameterType="hashmap">
		UPDATE list_contents
		SET
			list_subject = #{subject}
			, list_content = #{contents}
		WHERE list_key = #{list_key}
	</update>
	
	<update id="editTodoDate" parameterType="hashmap">
		UPDATE list_status
		SET
			list_date = #{date}
		WHERE list_key = #{list_key}
	</update>
</mapper>